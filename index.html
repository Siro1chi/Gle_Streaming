<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–ì–ª–µ-–°—Ç—Ä–∏–º ¬∑ –°–∏–º—É–ª—è—Ç–æ—Ä —Å—Ç—Ä–∏–º–µ—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: radial-gradient(circle at top, #0a1a0a, #030803);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 12px;
        }

        .game-container {
            max-width: 480px;
            width: 100%;
            background: rgba(10, 20, 10, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 28px;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.1);
            padding: 20px 16px;
            border: 1px solid #2a4a2a;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* ===== –°–¢–ê–¢–ò–°–¢–ò–ö–ê ===== */
        .stats-row {
            display: grid;
            grid-template-columns: 2fr 1.2fr; /* –ß—É—Ç—å –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è cash */
            gap: 12px;
            width: 100%;
        }

        .subs-block {
            background: #0e1a0e;
            border: 2px solid #3a7a3a;
            border-radius: 20px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 0;
        }

        .subs-icon {
            background: #1a3a1a;
            width: 48px;
            height: 48px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            border-bottom: 4px solid #0a2e0a;
        }

        .subs-info {
            flex: 1;
        }

        .subs-label {
            font-size: 12px;
            color: #8bc34a;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .subs-value {
            font-size: 32px;
            font-weight: 800;
            color: #c8ffb0;
            line-height: 1;
            text-shadow: 0 0 10px #00aa00;
        }

        .cash-block {
            background: #0e1a0e;
            border: 2px solid #ffd700;
            border-radius: 20px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px;
            min-width: 0;
        }
        .cash-block span:last-child {
        flex-shrink: 0;
        font-size: 14px;
            }

        .cash-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .cash-value {
            font-size: 22px;
            font-weight: 700;
            color: #ffd700;
            text-shadow: 0 0 10px #aa8800;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* ===== –ö–õ–ò–ö–ï–† ===== */
        .click-area {
            display: flex;
            justify-content: center;
            margin: 5px 0;
        }

        .click-btn {
            background: linear-gradient(145deg, #1a4a1a, #0a2a0a);
            border: none;
            border-bottom: 6px solid #00aa00;
            color: white;
            font-size: 28px;
            font-weight: 700;
            padding: 18px 40px;
            border-radius: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            box-shadow: 0 8px 0 #004400, 0 0 30px #00aa00;
            width: 100%;
            max-width: 320px;
            letter-spacing: 2px;
            transition: all 0.05s ease;
            touch-action: auto;
        }

        .click-btn:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #004400, 0 0 40px #00ff00;
            border-bottom-width: 2px;
        }

        /* ===== –ü–ê–°–°–ò–í–ù–´–ô –î–û–•–û–î ===== */
        .passive-stats {
            background: #0e1a0e;
            border-radius: 16px;
            padding: 12px 18px;
            display: flex;
            justify-content: space-between;
            border: 1px solid #2a5a2a;
            color: #a0e0a0;
        }

        .per-second {
            background: #1a3a1a;
            color: #d4ff78;
            padding: 6px 18px;
            border-radius: 40px;
            font-weight: 600;
            border: 1px solid #7ac77a;
            box-shadow: 0 0 10px #00aa00;
        }

        /* ===== –ü–†–ï–°–¢–ò–ñ / –ù–û–í–´–ô –ö–û–ù–¢–ï–ù–¢ ===== */
        .prestige-section {
            background: linear-gradient(145deg, #0e2a0e, #051005);
            border-radius: 24px;
            padding: 16px;
            border: 2px solid #d4af37;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .prestige-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #ffd700;
        }

        .prestige-title h3 {
            font-size: 22px;
            font-weight: 800;
            text-shadow: 0 0 10px #aa8800;
        }

        .prestige-button {
            background: linear-gradient(145deg, #d4af37, #9e8b3c);
            border: none;
            border-bottom: 6px solid #6b5a2a;
            color: #0a1a0a;
            font-weight: 800;
            font-size: 20px;
            padding: 14px 24px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 6px 0 #4a3a1a, 0 0 20px #ffd700;
            transition: all 0.05s;
            width: 100%;
        }

        .prestige-button:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #4a3a1a, 0 0 30px #ffff00;
            border-bottom-width: 2px;
        }

        .prestige-button:disabled {
            opacity: 0.5;
            box-shadow: none;
            transform: none;
            pointer-events: none;
        }

        /* ===== –ü–ï–†–°–û–ù–ê–ñ –ò –ú–û–î–ê–õ–ö–ê ===== */
        .character-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #0e1a0e;
            border-radius: 20px;
            padding: 12px 18px;
            border: 2px solid #7a3a7a;
            cursor: pointer;
        }

        .character-avatar {
            background: linear-gradient(145deg, #2a1a2a, #1a0a1a);
            width: 60px;
            height: 60px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            border: 3px solid #c8a0ff;
            box-shadow: 0 0 20px #aa88ff;
        }

        .character-info {
            flex: 1;
            margin-left: 16px;
            color: #e0c0ff;
        }

        .character-name {
            font-weight: 700;
            font-size: 18px;
        }

        .character-bonus {
            font-size: 13px;
            color: #d0a0ff;
        }

        .gem-indicator {
            background: #1a2a4a;
            padding: 8px 16px;
            border-radius: 40px;
            color: #aad4ff;
            border: 1px solid #5a9aff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* ===== –ö–û–ù–¢–ï–ù–¢ (–ù–ï –°–ë–†–ê–°–´–í–ê–ï–¢–°–Ø) ===== */
        .content-title {
            font-size: 20px;
            font-weight: 700;
            color: #a0e0a0;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 3px solid #2a5a2a;
            padding-bottom: 10px;
            margin-bottom: 8px;
        }

        .content-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 360px;
            overflow-y: auto;
            padding-right: 4px;
        }

        .content-item {
            background: #0e1a0e;
            border-radius: 20px;
            padding: 14px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1.5px solid #2a5a2a;
            transition: all 0.1s;
        }

        .content-info {
            flex: 1;
        }

        .content-name {
            font-weight: 700;
            font-size: 18px;
            color: #e0ffe0;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .level-badge {
            background: #1a4a1a;
            border-radius: 40px;
            padding: 4px 12px;
            font-size: 13px;
            font-weight: 600;
            color: #c8ffa0;
            border: 1px solid #5a9a5a;
        }

        .content-effects {
            font-size: 13px;
            color: #b0dab0;
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .effect-badge {
            background: #1a2a1a;
            padding: 4px 12px;
            border-radius: 40px;
            font-weight: 500;
            border: 1px solid #5a8a5a;
        }

        .content-price {
            background: linear-gradient(145deg, #1e4a1e, #0a2e0a);
            color: #ffd700;
            padding: 10px 14px;
            border-radius: 18px;
            font-weight: 700;
            font-size: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
            text-align: center;
            border: none;
            border-bottom: 4px solid #004400;
            transition: all 0.05s;
            cursor: pointer;
        }

        .content-price:active {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }

        .content-price:disabled {
            opacity: 0.5;
            transform: none;
            pointer-events: none;
        }

        .price-small {
            font-size: 14px;
            color: #a0d0a0;
            font-weight: 100;
        }

        /* ===== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(145deg, #1a2a1a, #0a1a0a);
            border-radius: 32px;
            padding: 24px;
            max-width: 400px;
            width: 90%;
            border: 3px solid #c8a0ff;
            box-shadow: 0 0 50px #aa88ff;
        }

        .character-showcase {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .big-avatar {
            width: 120px;
            height: 120px;
            background: linear-gradient(145deg, #2a1a2a, #1a0a1a);
            border-radius: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 72px;
            border: 5px solid #e0c0ff;
            box-shadow: 0 0 40px #d0a0ff;
        }

        .skins-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .skin-item {
            background: #0e1a0e;
            border: 2px solid #3a3a7a;
            border-radius: 16px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .skin-item.owned {
            border-color: #ffd700;
            background: #1a2a1a;
        }

        .skin-icon {
            font-size: 36px;
        }

        .skin-price {
            font-size: 14px;
            color: #aad4ff;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .close-modal {
            background: #3a1a1a;
            color: white;
            border: none;
            border-bottom: 4px solid #5a2a2a;
            padding: 12px 24px;
            border-radius: 20px;
            font-weight: 700;
            width: 100%;
            margin-top: 16px;
            cursor: pointer;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: #2a5a2a;
            border-radius: 4px;
        }

        @media (max-width: 380px) {
            .stats-row {
                grid-template-columns: 1fr; /* –û–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü */
            }
            
            .cash-block {
                justify-content: space-between;
            }
        }
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="game-container">
        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê: –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –∏ –î–æ–ª–ª–∞—Ä—ã -->
        <div class="stats-row">
            <div class="subs-block">
                <div class="subs-icon">üë•</div>
                <div class="subs-info">
                    <div class="subs-label">–ü–û–î–ü–ò–°–ß–ò–ö–ò</div>
                    <div class="subs-value" id="subsDisplay">0</div>
                </div>
            </div>
            <div class="cash-block">
                <span class="cash-icon">üí∞</span>
                <span class="cash-value" id="cashDisplay">0</span>
                <span style="color:#ffd700; font-size:14px;">$</span>
            </div>
        </div>

        <!-- –ö–ù–û–ü–ö–ê –ö–õ–ò–ö–ê: –°–¢–†–ò–ú -->
        <div class="click-area">
            <button class="click-btn" id="clickButton">
                üé• –°–¢–†–ò–ú–ò–¢–¨ +1
            </button>
        </div>

        <!-- –ü–ê–°–°–ò–í–ù–´–ô –î–û–•–û–î -->
        <div class="passive-stats">
            <span>üìä –ü–ê–°–°–ò–í–ù–´–ô –î–û–•–û–î</span>
            <span class="per-second" id="perSecondDisplay">
                +0.00 $/—Å–µ–∫
            </span>
        </div>

        <!-- –ü–ï–†–°–û–ù–ê–ñ (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É) -->
        <div class="character-section" id="characterButton">
            <div class="character-avatar" id="avatarEmoji">
                üé≠
            </div>
            <div class="character-info">
                <div class="character-name" id="characterName">–°—Ç—Ä–∏–º–µ—Ä</div>
                <div class="character-bonus" id="characterBonus">+0% –∫ –¥–æ—Ö–æ–¥—É</div>
            </div>
            <div class="gem-indicator">
                üíé <span id="gemsDisplay">0</span>
            </div>
        </div>

        <!-- –ü–†–ï–°–¢–ò–ñ: –ù–û–í–û–ï –ù–ê–ü–†–ê–í–õ–ï–ù–ò–ï -->
        <div class="prestige-section">
            <div class="prestige-title">
                <h3>üî• –°–ú–ï–ù–ò–¢–¨ –§–û–†–ú–ê–¢</h3>
                <span style="color:#ffd700;" id="nextContentPreview">–û—Ç–∫—Ä–æ–µ—Ç—Å—è: –í—ãTab</span>
            </div>
            <button class="prestige-button" id="prestigeButton">
                ‚ö° –û–°–í–û–ò–¢–¨ –§–û–†–ú–ê–¢
                <span style="background:rgba(0,0,0,0.3); padding:4px 12px; border-radius:40px;" id="prestigeCostDisplay">
                    1000 üë•
                </span>
            </button>
            <p style="font-size:12px; color:#a0e0a0; text-align:center;">
                üíé –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—ë—Ç –ì–ª–µ-–ª–º–∞–∑—ã –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
            </p>
        </div>

        <!-- –ö–û–ù–¢–ï–ù–¢ (–ù–ï –°–ë–†–ê–°–´–í–ê–ï–¢–°–Ø) -->
        <div>
            <div class="content-title">
                üé¨ –ö–û–ù–¢–ï–ù–¢-–°–¢–£–î–ò–Ø
            </div>
            <div class="content-list" id="contentContainer">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ -->
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê –° –ü–ï–†–°–û–ù–ê–ñ–ï–ú –ò –û–ë–†–ê–ó–ê–ú–ò -->
    <div class="modal" id="characterModal">
        <div class="modal-content">
            <div class="character-showcase">
                <div class="big-avatar" id="modalAvatar">
                    üé≠
                </div>
                <h2 style="color:#e0c0ff;" id="modalName">–°—Ç—Ä–∏–º–µ—Ä</h2>
                <div style="color:#ffd700; font-size:20px; display:flex; gap:20px;">
                    <span>üíé <span id="modalGems">0</span></span>
                </div>
                
                <div style="width:100%;">
                    <h3 style="color:#c0ffc0; margin-bottom:12px;">üé® –û–ë–†–ê–ó–´</h3>
                    <div class="skins-grid" id="skinsContainer">
                        <!-- –°–∫–∏–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                
                <button class="close-modal" id="closeModalBtn">
                    ‚úï –ó–ê–ö–†–´–¢–¨
                </button>
                <div style="margin-top: 20px; border-top: 1px solid #2a5a2a; padding-top: 16px;">
                    <h3 style="color: #ff6b6b; margin-bottom: 12px;">‚ö†Ô∏è –û–ü–ê–°–ù–ê–Ø –ó–û–ù–ê</h3>
                    <button class="reset-button" id="resetGameBtn" style="
                        background: linear-gradient(145deg, #4a1a1a, #2a0a0a);
                        border: none;
                        border-bottom: 6px solid #6b2a2a;
                        color: white;
                        font-weight: 700;
                        font-size: 16px;
                        padding: 12px 24px;
                        border-radius: 20px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 12px;
                        box-shadow: 0 6px 0 #3a1a1a, 0 0 15px #ff0000;
                        width: 100%;
                        cursor: pointer;
                        touch-action: auto;
                    ">
                        üßπ –ü–û–õ–ù–´–ô –°–ë–†–û–° –ü–†–û–ì–†–ï–°–°–ê
                    </button>
                    <p style="color: #ffaaaa; font-size: 11px; text-align: center; margin-top: 8px;">
                        ‚ö° –í—Å—ë –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è!
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            "use strict";

            // ============ –ò–ì–†–û–í–´–ï –î–ê–ù–ù–´–ï ============
            let subscribers = 0;        // –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ (–¥–ª—è –ø—Ä–µ—Å—Ç–∏–∂–∞)
            let cash = 0;              // –î–æ–ª–ª–∞—Ä—ã (–≤–∞–ª—é—Ç–∞)
            let gems = 0;             // –ì–ª–µ-–ª–º–∞–∑—ã (–¥–ª—è –æ–±—Ä–∞–∑–æ–≤)
            let prestigeLevel = 0;     // –£—Ä–æ–≤–µ–Ω—å –ø—Ä–µ—Å—Ç–∏–∂–∞ (—Ñ–æ—Ä–º–∞—Ç—ã)
            let passiveCashPerSec = 0; // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ $/—Å–µ–∫
            let passiveSubsPerSec = 0; // –ü–∞—Å—Å–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏/—Å–µ–∫
            let clickBonus = 0;
            let clickPower = 1;        // –°–∏–ª–∞ –∫–ª–∏–∫–∞
            let globalBonus = 1.0;     // –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ –æ—Ç –æ–±—Ä–∞–∑–æ–≤

            // ============ –û–¢–ö–†–´–¢–´–ï –§–û–†–ú–ê–¢–´ (–ü–†–ï–°–¢–ò–ñ) ============
            const contentUnlocks = [
                { id: 'youtab', name: 'üìπ YouTab', unlocked: true, subsReq: 0 },
                { id: 'tegigram', name: 'üì± Tegigram', unlocked: false, subsReq: 500 },
                { id: 'kiktotk', name: 'üéµ KikTotk', unlocked: false, subsReq: 2000 },
                { id: 'cosplay', name: 'üßù –ö–æ—Å–ø–ª–µ–π', unlocked: false, subsReq: 5000 },
                { id: 'spofifi', name: 'üéß Spofifi', unlocked: false, subsReq: 10000 }
            ];

            // ============ –ö–û–ù–¢–ï–ù–¢ (–ù–ï –°–ë–†–ê–°–´–í–ê–ï–¢–°–Ø!) ============
            const contentItems = [
                {
                    id: 'youtab',
                    name: '–°—Ç—Ä–∏–º–∏–Ω–≥ –Ω–∞ YouTab',
                    desc: '–°—Ç—Ä–∏–º–∏–Ω–≥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞',
                    baseSubsPrice: 100,
                    baseCashPrice: 0,
                    subsPerSec: 0,
                    cashPerSec: 0.01,
                    clickBonus: 1,
                    multiplierTarget: null,
                    count: 0,
                    maxLevel: Infinity
                },
                {
                    id: 'tegigram',
                    name: '–ü–æ—Å—Ç—ã –≤ Tegigram',
                    desc: '–í–µ—Å—ë–ª—ã–µ –Ω–∞—Ä–µ–∑–∫–∏',
                    baseSubsPrice: 500,
                    baseCashPrice: 0.25,
                    subsPerSec: 0.5,
                    cashPerSec: 0.05,
                    clickBonus: 0,
                    multiplierTarget: null,
                    count: 0,
                    maxLevel: Infinity
                },
                {
                    id: 'kiktotk',
                    name: '–†–æ–ª–∏–∫–∏ –≤ KikTotk',
                    desc: '–ö–æ—Ä–æ—Ç–∫–∏–µ —Ä–æ–ª–∏–∫–∏',
                    baseSubsPrice: 1000,
                    baseCashPrice: 2,
                    subsPerSec: 5,
                    cashPerSec: 0.1,
                    clickBonus: 0,
                    multiplierTarget: null,
                    count: 0,
                    maxLevel: Infinity
                },
                {
                    id: 'cosplay',
                    name: '–ö–æ—Å–ø–ª–µ–π-—Å—Ç—Ä–∏–º—ã',
                    desc: '–£—Å–∏–ª–∏–≤–∞–µ—Ç YouTab',
                    baseSubsPrice: 2000,
                    baseCashPrice: 10,
                    subsPerSec: 0,
                    cashPerSec: 0,
                    clickBonus: 10,
                    multiplierTarget: 'youtab',
                    multiplierValue: 0.25,
                    count: 0,
                    maxLevel: Infinity
                },
                {
                    id: 'spofifi',
                    name: '–¢—Ä–µ–∫–∏ –≤ Spofifi',
                    desc: '–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏',
                    baseSubsPrice: 5000,
                    baseCashPrice: 50,
                    subsPerSec: 0,
                    cashPerSec: 1,
                    clickBonus: 0,
                    multiplierTarget: null,
                    count: 0,
                    maxLevel: Infinity
                }
            ];

            // ============ –û–ë–†–ê–ó–´ –ü–ï–†–°–û–ù–ê–ñ–ê ============
            const skins = [
                { id: 'default', name: '–ö–ª–∞—Å—Å–∏–∫–∞', emoji: 'üé≠', bonus: 1.0, price: 0, owned: true },
                { id: 'cyber', name: '–ö–∏–±–µ—Ä', emoji: 'üëæ', bonus: 1.1, price: 50, owned: false },
                { id: 'vampire', name: '–°—Ç—Ä–∏–º–µ—Ä-–≤–∞–º–ø–∏—Ä', emoji: 'üßõ', bonus: 1.15, price: 100, owned: false },
                { id: 'robot', name: '–†–æ–±–æ', emoji: 'ü§ñ', bonus: 1.2, price: 200, owned: false },
                { id: 'angel', name: '–ê–Ω–≥–µ–ª —ç—Ñ–∏—Ä–∞', emoji: 'üëº', bonus: 1.3, price: 500, owned: false },
                { id: 'demon', name: '–î–µ–º–æ–Ω —Å—Ç—Ä–∏–º–∞', emoji: 'üòà', bonus: 1.4, price: 1000, owned: false }
            ];

            let currentSkin = skins[0];
            const SAVE_KEY = 'glestream_save';

            // ============ –¶–ï–ù–´ –ö–û–ù–¢–ï–ù–¢–ê ============
            function getContentPrice(content) {
                let subsPrice = Math.floor(content.baseSubsPrice * Math.pow(1.8, content.count));
                let cashPrice = Math.floor(content.baseCashPrice * Math.pow(1.6, content.count) * 100) / 100;
                return { subs: subsPrice, cash: cashPrice };
            }

            // ============ –°–¢–û–ò–ú–û–°–¢–¨ –ü–†–ï–°–¢–ò–ñ–ê ============
            function getPrestigeCost() {
                if (prestigeLevel >= contentUnlocks.length - 1) return Infinity;
                const nextContent = contentUnlocks[prestigeLevel + 1];
                return nextContent ? nextContent.subsReq : Infinity;
            }

            // ============ –°–õ–ï–î–£–Æ–©–ò–ô –§–û–†–ú–ê–¢ ============
            function getNextContentName() {
                if (prestigeLevel >= contentUnlocks.length - 1) return "–í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã";
                return contentUnlocks[prestigeLevel + 1].name;
            }

            // ============ –ü–ï–†–ï–°–ß–Å–¢ –ü–ê–°–°–ò–í–ù–û–ì–û –î–û–•–û–î–ê ============
            function recalcPassiveIncome() {
                let totalCash = 0;
                let totalSubs = 0;
                
                contentItems.forEach(content => {
                    // –ë–∞–∑–æ–≤—ã–π –¥–æ—Ö–æ–¥
                    totalCash += content.cashPerSec * content.count * globalBonus;
                    totalSubs += content.subsPerSec * content.count * globalBonus;
                    
                    // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã
                    if (content.multiplierTarget) {
                        const target = contentItems.find(c => c.id === content.multiplierTarget);
                        if (target) {
                            // –ù–µ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –¥–æ—Ö–æ–¥ –Ω–∞–ø—Ä—è–º—É—é, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ
                        }
                    }
                });

                // –£—Å–∏–ª–µ–Ω–∏–µ –æ—Ç –∫–æ—Å–ø–ª–µ—è –¥–ª—è YouTab
                const cosplay = contentItems.find(c => c.id === 'cosplay');
                const youtab = contentItems.find(c => c.id === 'youtab');
                if (cosplay && youtab && cosplay.count > 0) {
                    const multiplier = 1 + (cosplay.count * cosplay.multiplierValue);
                    totalCash += youtab.cashPerSec * youtab.count * (multiplier - 1) * globalBonus;
                }

                passiveCashPerSec = totalCash;
                passiveSubsPerSec = totalSubs;
                
                updatePassiveDisplay();
            }

            // ============ –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ò–°–ü–õ–ï–Ø ============
            function updatePassiveDisplay() {
                const totalPassiveCash = passiveCashPerSec;
                document.getElementById('perSecondDisplay').innerHTML = `+${totalPassiveCash.toFixed(2)} $/—Å–µ–∫`;
            }

            // ============ –°–û–•–†–ê–ù–ï–ù–ò–ï ============
            function saveGame() {
                const saveData = {
                    subscribers, cash, gems, prestigeLevel,
                    passiveCashPerSec, passiveSubsPerSec, clickPower, globalBonus,
                    contentItems: contentItems.map(c => ({ id: c.id, count: c.count })),
                    contentUnlocks: contentUnlocks.map(u => ({ id: u.id, unlocked: u.unlocked })),
                    skins: skins.map(s => ({ id: s.id, owned: s.owned })),
                    currentSkin: currentSkin.id
                };
                localStorage.setItem(SAVE_KEY, JSON.stringify(saveData));
            }

            // ============ –ó–ê–ì–†–£–ó–ö–ê ============
            function loadGame() {
                const saved = localStorage.getItem(SAVE_KEY);
                if (!saved) return false;
                
                try {
                    const data = JSON.parse(saved);
                    subscribers = data.subscribers || 0;
                    cash = data.cash || 0;
                    gems = data.gems || 0;
                    prestigeLevel = data.prestigeLevel || 0;
                    globalBonus = data.globalBonus || 1.0;
                    
                    if (data.contentItems) {
                        data.contentItems.forEach(savedContent => {
                            const content = contentItems.find(c => c.id === savedContent.id);
                            if (content) content.count = savedContent.count || 0;
                        });
                    }
                    
                    if (data.contentUnlocks) {
                        data.contentUnlocks.forEach(savedUnlock => {
                            const unlock = contentUnlocks.find(u => u.id === savedUnlock.id);
                            if (unlock) unlock.unlocked = savedUnlock.unlocked || false;
                        });
                    }
                    
                    if (data.skins) {
                        data.skins.forEach(savedSkin => {
                            const skin = skins.find(s => s.id === savedSkin.id);
                            if (skin) skin.owned = savedSkin.owned || false;
                        });
                    }
                    
                    if (data.currentSkin) {
                        const skin = skins.find(s => s.id === data.currentSkin);
                        if (skin) currentSkin = skin;
                    }

                    recalcClickPower();
                    recalcPassiveIncome();
                    renderGame();
                    return true;
                } catch (e) {
                    return false;
                }
            }

            // ============ –ü–†–ï–°–¢–ò–ñ - –ù–û–í–´–ô –§–û–†–ú–ê–¢ ============
            function performPrestige() {
                const cost = getPrestigeCost();
                if (prestigeLevel < contentUnlocks.length - 1 && subscribers >= cost) {
                    subscribers -= cost;
                    prestigeLevel++;
                    
                    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
                    if (prestigeLevel < contentUnlocks.length) {
                        contentUnlocks[prestigeLevel].unlocked = true;
                    }
                    
                    // –î–∞—ë–º –ì–ª–µ-–ª–º–∞–∑—ã
                    gems += 25 + (prestigeLevel * 10);
                    
                    recalcPassiveIncome();
                    renderGame();
                    saveGame();
                }
            }

            // ============ –ü–û–ö–£–ü–ö–ê –ö–û–ù–¢–ï–ù–¢–ê ============
            function purchaseContent(contentId) {
                const content = contentItems.find(c => c.id === contentId);
                if (!content) return;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ñ–æ—Ä–º–∞—Ç
                const unlock = contentUnlocks.find(u => u.id === contentId);
                if (unlock && !unlock.unlocked) return;
                
                const price = getContentPrice(content);
                if (subscribers >= price.subs && cash >= price.cash) {
                    cash -= price.cash;
                    content.count++;
                    
                    recalcPassiveIncome();
                    recalcClickPower();
                    renderGame();
                    saveGame();
                }
            }

            // ============ –ü–û–ö–£–ü–ö–ê –û–ë–†–ê–ó–ê ============
            function purchaseSkin(skinId) {
                const skin = skins.find(s => s.id === skinId);
                if (!skin || skin.owned || gems < skin.price) return;
                
                gems -= skin.price;
                skin.owned = true;
                
                renderModal();
                renderGame();
                saveGame();
            }

            // ============ –í–´–ë–û–† –û–ë–†–ê–ó–ê ============
            function selectSkin(skinId) {
                const skin = skins.find(s => s.id === skinId);
                if (skin && skin.owned) {
                    currentSkin = skin;
                    globalBonus = skin.bonus;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä
                    document.getElementById('avatarEmoji').innerText = skin.emoji;
                    document.getElementById('modalAvatar').innerText = skin.emoji;
                    document.getElementById('characterName').innerText = `${skin.name} –ì–ª–µ–±`;
                    document.getElementById('characterBonus').innerHTML = `+${((skin.bonus - 1) * 100).toFixed(0)}% –∫ –¥–æ—Ö–æ–¥—É`;
                    
                    recalcPassiveIncome();
                    renderGame();
                    saveGame();
                }
            }

            // ============ –†–ï–ù–î–ï–† –ú–û–î–ê–õ–ö–ò ============
            function renderModal() {
                document.getElementById('modalGems').innerText = gems;
                
                let skinsHtml = '';
                skins.forEach(skin => {
                    skinsHtml += `
                        <div class="skin-item ${skin.owned ? 'owned' : ''}" 
                             onclick="window.selectSkinHandler('${skin.id}')"
                             ${!skin.owned ? `onclick="window.purchaseSkinHandler('${skin.id}')"` : ''}>
                            <span class="skin-icon">${skin.emoji}</span>
                            <span style="color:#e0e0e0; font-size:12px;">${skin.name}</span>
                            ${skin.owned ? '<span style="color:#ffd700;">‚úì</span>' : 
                                `<span class="skin-price">üíé ${skin.price}</span>`}
                        </div>
                    `;
                });
                document.getElementById('skinsContainer').innerHTML = skinsHtml;
            }

            // ============ –†–ï–ù–î–ï–† –ò–ì–†–´ ============
            function renderGame() {
                document.getElementById('subsDisplay').innerText = Math.floor(subscribers);
                document.getElementById('cashDisplay').innerText = cash.toFixed(1);
                document.getElementById('gemsDisplay').innerText = gems;
                
                updatePassiveDisplay();
                
                // –ü—Ä–µ—Å—Ç–∏–∂ –∫–Ω–æ–ø–∫–∞
                const prestigeCost = getPrestigeCost();
                document.getElementById('prestigeCostDisplay').innerHTML = `${prestigeCost.toLocaleString()} üë•`;
                document.getElementById('nextContentPreview').innerHTML = `‚Üí ${getNextContentName()}`;
                document.getElementById('prestigeButton').disabled = subscribers < prestigeCost || prestigeLevel >= contentUnlocks.length - 1;
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                let html = '';
                contentItems.forEach(content => {
                    const unlock = contentUnlocks.find(u => u.id === content.id);
                    if (!unlock || !unlock.unlocked) return;
                    
                    const price = getContentPrice(content);
                    const canAfford = subscribers >= price.subs && cash >= price.cash;
                    
                    let effects = [];
                    if (content.cashPerSec > 0) effects.push(`+${content.cashPerSec * globalBonus} $/—Å–µ–∫`);
                    if (content.subsPerSec > 0) effects.push(`+${content.subsPerSec * globalBonus} üë•/—Å–µ–∫`);
                    if (content.clickBonus > 0) effects.push(`+${content.clickBonus} üë• –∑–∞ –∫–ª–∏–∫`);
                    if (content.multiplierTarget) {
                        const target = contentItems.find(c => c.id === content.multiplierTarget);
                        effects.push(`x${1 + content.count * content.multiplierValue} –∫ ${target?.name}`);
                    }
                    
                    html += `
                        <div class="content-item">
                            <div class="content-info">
                                <div class="content-name">
                                    ${content.name}
                                    ${content.count > 0 ? `<span class="level-badge">Lv.${content.count}</span>` : ''}
                                </div>
                                <div class="content-effects">
                                    ${effects.map(e => `<span class="effect-badge">${e}</span>`).join('')}
                                </div>
                            </div>
                            <button class="content-price" 
                                    data-content-id="${content.id}"
                                    ${!canAfford ? 'disabled' : ''}>
                                üíé ${price.subs} üë•
                                ${price.cash > 0 ? `<br><span class="price-small">$${price.cash.toFixed(2)}</span>` : ''}
                                <span class="price-small">—É–ª—É—á—à–∏—Ç—å</span>
                            </button>
                        </div>
                    `;
                });
                
                document.getElementById('contentContainer').innerHTML = html;
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                contentItems.forEach(content => {
                    const button = document.querySelector(`button[data-content-id="${content.id}"]`);
                    if (button) {
                        button.removeEventListener('click', contentHandler);
                        button.addEventListener('click', contentHandler);
                    }
                });
            }

            // ============ –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ============
            function contentHandler(e) {
                e.preventDefault();
                e.stopPropagation();
                const contentId = e.currentTarget.dataset.contentId;
                purchaseContent(contentId);
            }

            function recalcClickPower() {
                let baseClick = 1; // –ë–∞–∑–æ–≤—ã–π +1 –ø–æ–¥–ø–∏—Å—á–∏–∫
                
                // –°—É–º–º–∏—Ä—É–µ–º –≤—Å–µ –±–æ–Ω—É—Å—ã –∫–ª–∏–∫–∞ –æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                const clickBonus = contentItems.reduce((sum, content) => {
                    return sum + (content.clickBonus * content.count);
                }, 0);
                
                clickPower = baseClick + clickBonus;
            }

            function handleClick() {
                subscribers += clickPower * globalBonus + clickBonus;
                renderGame();
                saveGame();
            }

            function idleTick() {
                let cashGain = passiveCashPerSec;
                let subsGain = passiveSubsPerSec;
                
                if (cashGain > 0) cash += cashGain;
                if (subsGain > 0) subscribers += subsGain;
                
                renderGame();
            }

            function resetGame() {
                // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                if (!confirm('üö® –¢–û–ß–ù–û –°–ë–†–û–°–ò–¢–¨?\n\n–í—Å–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏, –¥–æ–ª–ª–∞—Ä—ã, –ì–ª–µ-–ª–º–∞–∑—ã, —É—Ä–æ–≤–Ω–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –æ–±—Ä–∞–∑—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞!')) {
                    return;
                }
                
                // –î–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                if (!confirm('üò± –ü–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ!\n\n–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å –Ω—É–ª—è?')) {
                    return;
                }
                
                // ===== –°–ë–†–ê–°–´–í–ê–ï–ú –í–°–Å =====
                
                // 1. –†–µ—Å—É—Ä—Å—ã
                subscribers = 0;
                cash = 0;
                gems = 0;
                prestigeLevel = 0;
                globalBonus = 1.0;
                clickPower = 1;
                
                // 2. –ö–æ–Ω—Ç–µ–Ω—Ç (–æ–±–Ω—É–ª—è–µ–º —É—Ä–æ–≤–Ω–∏)
                contentItems.forEach(content => {
                    content.count = 0;
                });
                
                // 3. –§–æ—Ä–º–∞—Ç—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ YouTab)
                contentUnlocks.forEach((unlock, index) => {
                    unlock.unlocked = index === 0; // –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
                });
                
                // 4. –°–∫–∏–Ω—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π)
                skins.forEach((skin, index) => {
                    skin.owned = index === 0; // –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π owned
                });
                
                // 5. –¢–µ–∫—É—â–∏–π –æ–±—Ä–∞–∑
                currentSkin = skins[0];
                globalBonus = currentSkin.bonus;
                
                // 6. –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                document.getElementById('avatarEmoji').innerText = currentSkin.emoji;
                document.getElementById('modalAvatar').innerText = currentSkin.emoji;
                document.getElementById('characterName').innerText = `${currentSkin.name} –ì–ª–µ–±`;
                document.getElementById('characterBonus').innerHTML = `+${((currentSkin.bonus - 1) * 100).toFixed(0)}% –∫ –¥–æ—Ö–æ–¥—É`;
                
                // 7. –ü–µ—Ä–µ—Å—á—ë—Ç –≤—Å–µ–≥–æ
                recalcPassiveIncome();
                recalcClickPower();
                
                // 8. –†–µ–Ω–¥–µ—Ä
                renderGame();
                renderModal();
                
                // 9. –£–¥–∞–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                localStorage.removeItem(SAVE_KEY);
                
                // 10. –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫
                alert('‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω. –£–¥–∞—á–∏ –∑–∞–Ω–æ–≤–æ!');
                
                // –•–µ–ø—Ç–∏–∫ –µ—Å–ª–∏ –µ—Å—Ç—å
                if (window.Telegram?.WebApp?.HapticFeedback) {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('error');
                }
            }
            // ============ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ============
            window.addEventListener('load', () => {
                // Telegram
                if (window.Telegram?.WebApp) {
                    Telegram.WebApp.ready();
                    Telegram.WebApp.expand();
                    recalcClickPower()
                }
                
                // –ó–∞–≥—Ä—É–∑–∫–∞
                if (!loadGame()) {
                    // –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                    contentUnlocks[0].unlocked = true;
                }
                
                recalcPassiveIncome();
                renderGame();
                renderModal();
                
                // –ö–ª–∏–∫ –∫–Ω–æ–ø–∫–∞ - –¢–û–õ–¨–ö–û –û–î–ò–ù –û–ë–†–ê–ë–û–¢–ß–ò–ö!
                const clickBtn = document.getElementById('clickButton');
                clickBtn.addEventListener('click', handleClick);
                
                // –ü—Ä–µ—Å—Ç–∏–∂
                document.getElementById('prestigeButton').addEventListener('click', performPrestige);
                
                // –ü–µ—Ä—Å–æ–Ω–∞–∂ - –º–æ–¥–∞–ª–∫–∞
                document.getElementById('characterButton').addEventListener('click', () => {
                    renderModal();
                    document.getElementById('characterModal').classList.add('active');
                });
                
                document.getElementById('closeModalBtn').addEventListener('click', () => {
                    document.getElementById('characterModal').classList.remove('active');
                });
                 document.addEventListener('click', function(e) {
                    if (e.target.id === 'resetGameBtn') {
                        resetGame();
                    }
                });
                
                // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–∫–∏–Ω–æ–≤
                window.selectSkinHandler = selectSkin;
                window.purchaseSkinHandler = (skinId) => {
                    purchaseSkin(skinId);
                    renderModal();
                };
                
                // Idle —Ç–∏–∫
                setInterval(idleTick, 1000);
                setInterval(saveGame, 30000);
            });

        })();
    </script>
</body>
</html>
