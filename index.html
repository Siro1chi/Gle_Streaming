<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–ì–ª–µ-–°—Ç—Ä–∏–º ¬∑ –°–∏–º—É–ª—è—Ç–æ—Ä —Å—Ç—Ä–∏–º–µ—Ä–∞</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Russo+One&display=swap" rel="stylesheet">
    
    <style>
        /* ========== CYBER-STREAMER VISUAL REWORK ========== */
:root {
    --bg-main: #0f0f1a;
    --bg-card: rgba(22, 22, 35, 0.85);
    --accent-pink: #ff2d75;
    --accent-blue: #2df7ff;
    --accent-gold: #ffd700;
    --accent-green: #00ff9d;
    --text-main: #ffffff;
    --text-muted: #8a8ba3;
    --border-glow: rgba(255, 255, 255, 0.1);
    --glass-border: 1px solid rgba(255, 255, 255, 0.1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', -apple-system, sans-serif;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

body {
    background-color: var(--bg-main);
    /* Animated background gradient */
    background-image: 
        radial-gradient(circle at 0% 0%, rgba(255, 45, 117, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 100% 100%, rgba(45, 247, 255, 0.1) 0%, transparent 50%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
    position: relative;
    overflow: hidden;
}

/* Decorative Grid Background */
body::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image: 
        linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
    background-size: 30px 30px;
    z-index: 0;
    pointer-events: none;
}

.game-container {
    position: relative;
    z-index: 1;
    max-width: 440px;
    width: 100%;
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 24px;
    border: var(--glass-border);
    padding: 20px 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    box-shadow: 
        0 0 40px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* ===== HEADER STATS ===== */
.stats-row {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    gap: 12px;
    width: 100%;
}

.stat-card {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 16px;
    padding: 12px;
    border: var(--glass-border);
    position: relative;
    overflow: hidden;
}

.stat-card::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
}

.subs-block { border-left: 3px solid var(--accent-pink); }
.cash-block { border-left: 3px solid var(--accent-gold); }

.stat-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
}

.stat-label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-muted);
    font-weight: 700;
}

.stat-value {
    font-family: 'Russo One', sans-serif;
    font-size: 32px;
    color: var(--text-main);
    line-height: 1;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
}

.cash-value {
    font-family: 'Russo One', sans-serif;
    font-size: 26px;
    color: var(--accent-gold);
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
}

.cash-suffix {
    font-size: 18px;
    color: rgba(255, 215, 0, 0.7);
    margin-left: 2px;
}

/* ===== MAIN CLICK BUTTON ===== */
.click-area {
    display: flex;
    justify-content: center;
    padding: 10px 0;
    position: relative;
}

.click-btn {
    position: relative;
    width: 100%;
    max-width: 300px;
    padding: 20px;
    background: linear-gradient(135deg, #ff2d75, #ff5f3a);
    border: none;
    border-radius: 50px;
    color: white;
    font-family: 'Russo One', sans-serif;
    font-size: 20px;
    letter-spacing: 1px;
    text-transform: uppercase;
    cursor: pointer;
    box-shadow: 
        0 10px 25px rgba(255, 45, 117, 0.4),
        inset 0 -4px 0 rgba(0, 0, 0, 0.2);
    transition: transform 0.1s, box-shadow 0.1s;
    overflow: hidden;
}

/* Shine effect */
.click-btn::before {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: 0.5s;
    z-index: 1;
}

.click-btn:active {
    transform: scale(0.95) translateY(2px);
    box-shadow: 0 5px 15px rgba(255, 45, 117, 0.4);
}

.click-btn:active::before {
    left: 100%;
}

.click-btn span {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

/* Live pulse dot */
.live-dot {
    width: 10px; height: 10px;
    background: #fff;
    border-radius: 50%;
    animation: pulse-live 1.5s infinite;
}

@keyframes pulse-live {
    0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
    100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}

/* Floating numbers container */
.floating-container {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    overflow: hidden;
}

.float-text {
    position: absolute;
    font-family: 'Russo One', sans-serif;
    font-size: 24px;
    color: white;
    text-shadow: 0 0 5px var(--accent-blue);
    animation: floatUp 0.8s ease-out forwards;
    z-index: 10;
}

@keyframes floatUp {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-100px) scale(1.2); }
}

/* ===== PASSIVE INCOME BAR ===== */
.passive-stats {
    background: rgba(45, 247, 255, 0.05);
    border: 1px solid rgba(45, 247, 255, 0.2);
    border-radius: 12px;
    padding: 10px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--accent-blue);
    font-size: 13px;
    font-weight: 600;
}

.per-second {
    background: rgba(0, 0, 0, 0.3);
    padding: 6px 12px;
    border-radius: 20px;
    border: 1px solid rgba(45, 247, 255, 0.3);
    font-size: 14px;
    font-weight: 700;
    box-shadow: 0 0 10px rgba(45, 247, 255, 0.1);
}

/* ===== CHARACTER SECTION ===== */
.character-section {
    background: linear-gradient(90deg, rgba(45, 50, 100, 0.4), rgba(20, 20, 30, 0.6));
    border-radius: 20px;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border: 1px solid rgba(160, 120, 255, 0.3);
    cursor: pointer;
    transition: transform 0.1s;
}

.character-section:active {
    transform: scale(0.98);
}

.character-avatar {
    width: 52px; height: 52px;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    box-shadow: 0 0 15px rgba(106, 17, 203, 0.4);
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.character-info {
    flex: 1;
    margin-left: 14px;
}

.character-name {
    font-weight: 700;
    font-size: 16px;
    color: white;
}

.character-bonus {
    font-size: 12px;
    color: var(--accent-blue);
    margin-top: 2px;
}

.gem-indicator {
    background: rgba(0, 255, 157, 0.1);
    color: var(--accent-green);
    border: 1px solid rgba(0, 255, 157, 0.3);
    padding: 6px 12px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* ===== PRESTIGE SECTION ===== */
.prestige-section {
    background: linear-gradient(145deg, rgba(255, 215, 0, 0.05), rgba(20, 20, 30, 0.8));
    border: 1px solid rgba(255, 215, 0, 0.3);
    border-radius: 20px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.prestige-title {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.prestige-title h3 {
    font-family: 'Russo One', sans-serif;
    font-size: 16px;
    color: var(--accent-gold);
    text-transform: uppercase;
}

.prestige-button {
    background: linear-gradient(135deg, #ffc107, #ff9800);
    border: none;
    border-radius: 16px;
    padding: 14px;
    color: #000;
    font-weight: 800;
    font-size: 14px;
    text-transform: uppercase;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
    transition: transform 0.1s;
}

.prestige-button:active {
    transform: scale(0.96);
}

.prestige-button:disabled {
    background: #333;
    color: #666;
    box-shadow: none;
    transform: none;
}

.prestige-cost-badge {
    background: rgba(0,0,0,0.2);
    padding: 4px 10px;
    border-radius: 8px;
    font-size: 12px;
}

/* ===== CONTENT LIST ===== */
.content-title {
    font-family: 'Russo One', sans-serif;
    font-size: 16px;
    color: white;
    text-transform: uppercase;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 2px solid rgba(255,255,255,0.1);
    display: flex;
    align-items: center;
    gap: 10px;
}

.content-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 300px;
    overflow-y: auto;
    padding-right: 4px;
}

/* Scrollbar Styling */
.content-list::-webkit-scrollbar {
    width: 4px;
}
.content-list::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.2);
    border-radius: 4px;
}

.content-item {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background 0.2s;
}

.content-item:active {
    background: rgba(255, 255, 255, 0.08);
}

.content-info {
    flex: 1;
    min-width: 0;
}

.content-name {
    font-weight: 700;
    color: white;
    font-size: 15px;
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.level-badge {
    background: linear-gradient(135deg, var(--accent-blue), var(--accent-green));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 11px;
    font-weight: 800;
    padding: 2px 6px;
    background-color: rgba(45, 247, 255, 0.1);
    border-radius: 4px;
    border: 1px solid rgba(45, 247, 255, 0.2);
    /* Fix text fill for compatibility */
    -webkit-text-fill-color: #fff; 
    color: #fff;
}

.content-effects {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.effect-badge {
    font-size: 10px;
    color: var(--text-muted);
    background: rgba(0,0,0,0.3);
    padding: 2px 6px;
    border-radius: 4px;
}

.content-price {
    background: var(--accent-green);
    color: #000;
    border: none;
    border-radius: 12px;
    padding: 10px 16px;
    font-weight: 800;
    font-size: 13px;
    min-width: 80px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 255, 157, 0.2);
    transition: transform 0.1s;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.content-price:active {
    transform: scale(0.9);
}

.content-price:disabled {
    background: #2a2a3a;
    color: #555;
    box-shadow: none;
    transform: none;
}

.price-small {
    font-size: 9px;
    opacity: 0.8;
    font-weight: 600;
}

/* ===== MODAL ===== */
.modal {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(10, 10, 20, 0.9);
    backdrop-filter: blur(10px);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

.modal.active {
    display: flex;
}

.modal-content {
    background: #161622;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 24px;
    padding: 24px;
    width: 100%;
    max-width: 360px;
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
}

.character-showcase {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.big-avatar {
    width: 100px; height: 100px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 50px;
    margin-bottom: 12px;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    box-shadow: 0 0 30px rgba(37, 117, 252, 0.3);
    border: 3px solid rgba(255,255,255,0.2);
}

.modal h2 {
    font-family: 'Russo One', sans-serif;
    color: white;
    margin-bottom: 8px;
}

.modal h3 {
    color: white;
    font-size: 14px;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.skins-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    width: 100%;
    margin-bottom: 20px;
}

.skin-item {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    cursor: pointer;
    transition: all 0.2s;
    height: 70px;
}

.skin-item.owned {
    border-color: var(--accent-green);
    background: rgba(0, 255, 157, 0.05);
    box-shadow: 0 0 10px rgba(0, 255, 157, 0.1);
}

.skin-icon { font-size: 24px; }
.skin-name { font-size: 9px; color: #ccc; text-align: center; }
.skin-price { font-size: 10px; color: var(--accent-green); font-weight: 700; }

.close-modal {
    background: #333;
    border: none;
    color: white;
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.2s;
}

.close-modal:active { background: #444; }

.reset-button {
    background: linear-gradient(135deg, #ff416c, #ff4b2b);
    border: none;
    color: white;
    padding: 12px;
    border-radius: 12px;
    width: 100%;
    font-weight: 700;
    margin-top: 16px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(255, 65, 108, 0.2);
}

/* Responsive */
@media (max-width: 360px) {
    .stat-value { font-size: 26px; }
    .cash-value { font-size: 22px; }
    .click-btn { font-size: 18px; padding: 16px; }
    .content-list { max-height: 220px; }
}
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="game-container">
        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
        <div class="stats-row">
            <div class="stat-card subs-block">
                <div class="stat-header">
                    <span style="font-size:12px">üì∫</span>
                    <span class="stat-label">–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</span>
                </div>
                <div class="stat-value" id="subsDisplay">0</div>
            </div>
            <div class="stat-card cash-block">
                <div class="stat-header">
                    <span style="font-size:12px">üí∞</span>
                    <span class="stat-label">–ë–∞–ª–∞–Ω—Å</span>
                </div>
                <div class="cash-value">
                    <span id="cashDisplay">0</span>
                    <span class="cash-suffix">$</span>
                </div>
            </div>
        </div>

        <!-- –ö–ù–û–ü–ö–ê –ö–õ–ò–ö–ê -->
        <div class="click-area">
            <!-- Container for visual floating numbers -->
            <div class="floating-container" id="floatingContainer"></div>
            <button class="click-btn" id="clickButton">
                <span>
                    <span class="live-dot"></span>
                    –°–¢–†–ò–ú–ò–¢–¨
                </span>
            </button>
        </div>

        <!-- –ü–ê–°–°–ò–í–ù–´–ô –î–û–•–û–î -->
        <div class="passive-stats">
            <span>üìä –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥</span>
            <span class="per-second" id="perSecondDisplay">+0.00 $/—Å–µ–∫</span>
        </div>

        <!-- –ü–ï–†–°–û–ù–ê–ñ -->
        <div class="character-section" id="characterButton">
            <div class="character-avatar" id="avatarEmoji">üé≠</div>
            <div class="character-info">
                <div class="character-name" id="characterName">–°—Ç—Ä–∏–º–µ—Ä</div>
                <div class="character-bonus" id="characterBonus">+0% –∫ –¥–æ—Ö–æ–¥—É</div>
            </div>
            <div class="gem-indicator">
                üíé <span id="gemsDisplay">0</span>
            </div>
        </div>

        <!-- –ü–†–ï–°–¢–ò–ñ -->
        <div class="prestige-section">
            <div class="prestige-title">
                <h3>üî• –°–º–µ–Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∞</h3>
                <span style="color:var(--accent-blue); font-size:12px; font-weight:600;" id="nextContentPreview">–î–∞–ª–µ–µ: YouTab</span>
            </div>
            <button class="prestige-button" id="prestigeButton">
                <span>‚ö° –û–°–í–û–ò–¢–¨ –§–û–†–ú–ê–¢</span>
                <span class="prestige-cost-badge" id="prestigeCostDisplay">1000 üë•</span>
            </button>
        </div>

        <!-- –ö–û–ù–¢–ï–ù–¢ -->
        <div>
            <div class="content-title">
                üé¨ –ö–û–ù–¢–ï–ù–¢-–°–¢–£–î–ò–Ø
            </div>
            <div class="content-list" id="contentContainer">
                <!-- JS Rendered -->
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê -->
    <div class="modal" id="characterModal">
        <div class="modal-content">
            <div class="character-showcase">
                <div class="big-avatar" id="modalAvatar">üé≠</div>
                <h2 id="modalName">–°—Ç—Ä–∏–º–µ—Ä</h2>
                <div style="color:var(--accent-gold); font-size:18px; display:flex; gap:15px; margin-bottom:20px;">
                    <span>üíé <span id="modalGems">0</span></span>
                </div>
                
                <div style="width:100%;">
                    <h3>üé® –û–±—Ä–∞–∑—ã</h3>
                    <div class="skins-grid" id="skinsContainer">
                        <!-- JS Rendered -->
                    </div>
                </div>
                
                <button class="close-modal" id="closeModalBtn">–ó–ê–ö–†–´–¢–¨</button>
                
                <div style="margin-top: 16px; width:100%;">
                   <button class="reset-button" id="resetGameBtn">üßπ –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            "use strict";

            // ============ –ò–ì–†–û–í–´–ï –î–ê–ù–ù–´–ï ============
            let subscribers = 0;        
            let cash = 0;              
            let gems = 0;             
            let prestigeLevel = 0;     
            let passiveCashPerSec = 0; 
            let passiveSubsPerSec = 0; 
            let clickBonus = 0;
            let clickPower = 1;        
            let globalBonus = 1.0;     

            // ============ –ö–û–ù–§–ò–ì (–ù–µ –º–µ–Ω—è–ª—Å—è) ============
            const contentUnlocks = [
                { id: 'youtab', name: 'üìπ YouTab', unlocked: true, subsReq: 0 },
                { id: 'tegigram', name: 'üì± Tegigram', unlocked: false, subsReq: 500 },
                { id: 'kiktotk', name: 'üéµ KikTotk', unlocked: false, subsReq: 2000 },
                { id: 'cosplay', name: 'üßù –ö–æ—Å–ø–ª–µ–π', unlocked: false, subsReq: 5000 },
                { id: 'spofifi', name: 'üéß Spofifi', unlocked: false, subsReq: 10000 }
            ];

            const contentItems = [
                { id: 'youtab', name: '–°—Ç—Ä–∏–º–∏–Ω–≥', desc: '–°—Ç—Ä–∏–º–∏–Ω–≥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞', baseSubsPrice: 100, baseCashPrice: 0, subsPerSec: 0, cashPerSec: 0.01, clickBonus: 1, multiplierTarget: null, count: 0, maxLevel: Infinity },
                { id: 'tegigram', name: '–ü–æ—Å—Ç—ã', desc: '–í–µ—Å—ë–ª—ã–µ –Ω–∞—Ä–µ–∑–∫–∏', baseSubsPrice: 500, baseCashPrice: 0.25, subsPerSec: 0.5, cashPerSec: 0.05, clickBonus: 0, multiplierTarget: null, count: 0, maxLevel: Infinity },
                { id: 'kiktotk', name: '–†–æ–ª–∏–∫–∏', desc: '–ö–æ—Ä–æ—Ç–∫–∏–µ —Ä–æ–ª–∏–∫–∏', baseSubsPrice: 1000, baseCashPrice: 2, subsPerSec: 5, cashPerSec: 0.1, clickBonus: 0, multiplierTarget: null, count: 0, maxLevel: Infinity },
                { id: 'cosplay', name: '–ö–æ—Å–ø–ª–µ–π', desc: '–£—Å–∏–ª–∏–≤–∞–µ—Ç YouTab', baseSubsPrice: 2000, baseCashPrice: 10, subsPerSec: 0, cashPerSec: 0, clickBonus: 10, multiplierTarget: 'youtab', multiplierValue: 0.25, count: 0, maxLevel: Infinity },
                { id: 'spofifi', name: '–¢—Ä–µ–∫–∏', desc: '–ú—É–∑—ã–∫–∞', baseSubsPrice: 5000, baseCashPrice: 50, subsPerSec: 0, cashPerSec: 1, clickBonus: 0, multiplierTarget: null, count: 0, maxLevel: Infinity }
            ];

            const skins = [
                { id: 'default', name: '–ö–ª–∞—Å—Å–∏–∫–∞', emoji: 'üé≠', bonus: 1.0, price: 0, owned: true },
                { id: 'cyber', name: '–ö–∏–±–µ—Ä', emoji: 'üëæ', bonus: 1.1, price: 50, owned: false },
                { id: 'vampire', name: '–í–∞–º–ø–∏—Ä', emoji: 'üßõ', bonus: 1.15, price: 100, owned: false },
                { id: 'robot', name: '–†–æ–±–æ', emoji: 'ü§ñ', bonus: 1.2, price: 200, owned: false },
                { id: 'angel', name: '–ê–Ω–≥–µ–ª', emoji: 'üëº', bonus: 1.3, price: 500, owned: false },
                { id: 'demon', name: '–î–µ–º–æ–Ω', emoji: 'üòà', bonus: 1.4, price: 1000, owned: false }
            ];

            let currentSkin = skins[0];
            const SAVE_KEY = 'glestream_save';

            // ============ –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ============
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏–∑—É–∞–ª–∞)
            function formatNum(num) {
                if (num >= 1e9) return (num / 1e9).toFixed(1) + 'B';
                if (num >= 1e6) return (num / 1e6).toFixed(1) + 'M';
                if (num >= 1e3) return (num / 1e3).toFixed(1) + 'K';
                return Math.floor(num);
            }

            function getContentPrice(content) {
                let subsPrice = Math.floor(content.baseSubsPrice * Math.pow(1.8, content.count));
                let cashPrice = Math.floor(content.baseCashPrice * Math.pow(1.6, content.count) * 100) / 100;
                return { subs: subsPrice, cash: cashPrice };
            }

            function getPrestigeCost() {
                if (prestigeLevel >= contentUnlocks.length - 1) return Infinity;
                const nextContent = contentUnlocks[prestigeLevel + 1];
                return nextContent ? nextContent.subsReq : Infinity;
            }

            function getNextContentName() {
                if (prestigeLevel >= contentUnlocks.length - 1) return "–í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã";
                return contentUnlocks[prestigeLevel + 1].name;
            }

            // ============ –í–ò–ó–£–ê–õ–¨–ù–´–ï –≠–§–§–ï–ö–¢–´ (NEW) ============
            
            function createFloatingNumber(value) {
                const container = document.getElementById('floatingContainer');
                const numEl = document.createElement('div');
                numEl.className = 'float-text';
                numEl.innerText = '+' + formatNum(value);
                
                // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
                const randomX = Math.random() * 80 + 10; // –æ—Ç 10% –¥–æ 90%
                numEl.style.left = randomX + '%';
                numEl.style.top = '40%';
                
                container.appendChild(numEl);
                
                setTimeout(() => {
                    numEl.remove();
                }, 800);
            }

            // ============ –õ–û–ì–ò–ö–ê –ò–ì–†–´ (–ù–µ –º–µ–Ω—è–ª–∞—Å—å) ============
            
            function recalcPassiveIncome() {
                let totalCash = 0;
                let totalSubs = 0;
                
                contentItems.forEach(content => {
                    totalCash += content.cashPerSec * content.count * globalBonus;
                    totalSubs += content.subsPerSec * content.count * globalBonus;
                });

                const cosplay = contentItems.find(c => c.id === 'cosplay');
                const youtab = contentItems.find(c => c.id === 'youtab');
                if (cosplay && youtab && cosplay.count > 0) {
                    const multiplier = 1 + (cosplay.count * cosplay.multiplierValue);
                    totalCash += youtab.cashPerSec * youtab.count * (multiplier - 1) * globalBonus;
                }

                passiveCashPerSec = totalCash;
                passiveSubsPerSec = totalSubs;
                updatePassiveDisplay();
            }

            function recalcClickPower() {
                let baseClick = 1;
                const clickBonus = contentItems.reduce((sum, content) => {
                    return sum + (content.clickBonus * content.count);
                }, 0);
                clickPower = baseClick + clickBonus;
            }

            function updatePassiveDisplay() {
                document.getElementById('perSecondDisplay').innerHTML = `+${passiveCashPerSec.toFixed(2)} $/—Å–µ–∫`;
            }

            function saveGame() {
                const saveData = {
                    subscribers, cash, gems, prestigeLevel,
                    passiveCashPerSec, passiveSubsPerSec, clickPower, globalBonus,
                    contentItems: contentItems.map(c => ({ id: c.id, count: c.count })),
                    contentUnlocks: contentUnlocks.map(u => ({ id: u.id, unlocked: u.unlocked })),
                    skins: skins.map(s => ({ id: s.id, owned: s.owned })),
                    currentSkin: currentSkin.id
                };
                localStorage.setItem(SAVE_KEY, JSON.stringify(saveData));
            }

            function loadGame() {
                const saved = localStorage.getItem(SAVE_KEY);
                if (!saved) return false;
                
                try {
                    const data = JSON.parse(saved);
                    subscribers = data.subscribers || 0;
                    cash = data.cash || 0;
                    gems = data.gems || 0;
                    prestigeLevel = data.prestigeLevel || 0;
                    globalBonus = data.globalBonus || 1.0;
                    
                    if (data.contentItems) {
                        data.contentItems.forEach(savedContent => {
                            const content = contentItems.find(c => c.id === savedContent.id);
                            if (content) content.count = savedContent.count || 0;
                        });
                    }
                    
                    if (data.contentUnlocks) {
                        data.contentUnlocks.forEach(savedUnlock => {
                            const unlock = contentUnlocks.find(u => u.id === savedUnlock.id);
                            if (unlock) unlock.unlocked = savedUnlock.unlocked || false;
                        });
                    }
                    
                    if (data.skins) {
                        data.skins.forEach(savedSkin => {
                            const skin = skins.find(s => s.id === savedSkin.id);
                            if (skin) skin.owned = savedSkin.owned || false;
                        });
                    }
                    
                    if (data.currentSkin) {
                        const skin = skins.find(s => s.id === data.currentSkin);
                        if (skin) currentSkin = skin;
                    }

                    recalcClickPower();
                    recalcPassiveIncome();
                    renderGame();
                    return true;
                } catch (e) {
                    return false;
                }
            }

            function performPrestige() {
                const cost = getPrestigeCost();
                if (prestigeLevel < contentUnlocks.length - 1 && subscribers >= cost) {
                    subscribers -= cost;
                    prestigeLevel++;
                    
                    if (prestigeLevel < contentUnlocks.length) {
                        contentUnlocks[prestigeLevel].unlocked = true;
                    }
                    
                    gems += 25 + (prestigeLevel * 10);
                    
                    recalcPassiveIncome();
                    renderGame();
                    saveGame();
                }
            }

            function purchaseContent(contentId) {
                const content = contentItems.find(c => c.id === contentId);
                if (!content) return;
                
                const unlock = contentUnlocks.find(u => u.id === contentId);
                if (unlock && !unlock.unlocked) return;
                
                const price = getContentPrice(content);
                if (subscribers >= price.subs && cash >= price.cash) {
                    cash -= price.cash;
                    content.count++;
                    
                    recalcPassiveIncome();
                    recalcClickPower();
                    renderGame();
                    saveGame();
                }
            }

            function purchaseSkin(skinId) {
                const skin = skins.find(s => s.id === skinId);
                if (!skin || skin.owned || gems < skin.price) return;
                
                gems -= skin.price;
                skin.owned = true;
                
                renderModal();
                renderGame();
                saveGame();
            }

            function selectSkin(skinId) {
                const skin = skins.find(s => s.id === skinId);
                if (skin && skin.owned) {
                    currentSkin = skin;
                    globalBonus = skin.bonus;
                    
                    document.getElementById('avatarEmoji').innerText = skin.emoji;
                    document.getElementById('modalAvatar').innerText = skin.emoji;
                    document.getElementById('characterName').innerText = `${skin.name} –ì–ª–µ–±`;
                    document.getElementById('characterBonus').innerHTML = `+${((skin.bonus - 1) * 100).toFixed(0)}% –∫ –¥–æ—Ö–æ–¥—É`;
                    
                    recalcPassiveIncome();
                    renderGame();
                    saveGame();
                }
            }

            function handleClick() {
                // –õ–æ–≥–∏–∫–∞
                subscribers += clickPower * globalBonus + clickBonus;
                
                // –í–∏–∑—É–∞–ª
                createFloatingNumber(clickPower);
                
                renderGame();
                saveGame();
            }

            function idleTick() {
                let cashGain = passiveCashPerSec;
                let subsGain = passiveSubsPerSec;
                
                if (cashGain > 0) cash += cashGain;
                if (subsGain > 0) subscribers += subsGain;
                
                renderGame();
            }

            function resetGame() {
                if (!confirm('üö® –¢–û–ß–ù–û –°–ë–†–û–°–ò–¢–¨?\n\n–í—Å–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏, –¥–æ–ª–ª–∞—Ä—ã, –ì–ª–µ-–ª–º–∞–∑—ã, —É—Ä–æ–≤–Ω–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –æ–±—Ä–∞–∑—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞!')) return;
                if (!confirm('üò± –ü–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ!\n\n–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å –Ω—É–ª—è?')) return;
                
                subscribers = 0; cash = 0; gems = 0; prestigeLevel = 0; globalBonus = 1.0; clickPower = 1;
                contentItems.forEach(c => c.count = 0);
                contentUnlocks.forEach((u, i) => u.unlocked = i === 0);
                skins.forEach((s, i) => s.owned = i === 0);
                currentSkin = skins[0];
                globalBonus = currentSkin.bonus;
                
                document.getElementById('avatarEmoji').innerText = currentSkin.emoji;
                document.getElementById('modalAvatar').innerText = currentSkin.emoji;
                document.getElementById('characterName').innerText = `${currentSkin.name} –ì–ª–µ–±`;
                document.getElementById('characterBonus').innerHTML = `+${((currentSkin.bonus - 1) * 100).toFixed(0)}% –∫ –¥–æ—Ö–æ–¥—É`;
                
                recalcPassiveIncome();
                recalcClickPower();
                renderGame();
                renderModal();
                localStorage.removeItem(SAVE_KEY);
                alert('‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω.');
            }

            // ============ –†–ï–ù–î–ï–† ============

            function renderModal() {
                document.getElementById('modalGems').innerText = gems;
                
                let skinsHtml = '';
                skins.forEach(skin => {
                    skinsHtml += `
                        <div class="skin-item ${skin.owned ? 'owned' : ''}" 
                             onclick="window.selectSkinHandler('${skin.id}')"
                             ${!skin.owned ? `onclick="window.purchaseSkinHandler('${skin.id}')"` : ''}>
                            <span class="skin-icon">${skin.emoji}</span>
                            <span class="skin-name">${skin.name}</span>
                            ${skin.owned ? '<span style="color:var(--accent-green); font-size:10px;">‚úì</span>' : 
                                `<span class="skin-price">üíé ${skin.price}</span>`}
                        </div>
                    `;
                });
                document.getElementById('skinsContainer').innerHTML = skinsHtml;
            }

            function renderGame() {
                document.getElementById('subsDisplay').innerText = formatNum(Math.floor(subscribers));
                document.getElementById('cashDisplay').innerText = cash.toFixed(1);
                document.getElementById('gemsDisplay').innerText = gems;
                
                updatePassiveDisplay();
                
                const prestigeCost = getPrestigeCost();
                document.getElementById('prestigeCostDisplay').innerHTML = `${prestigeCost.toLocaleString()} üë•`;
                document.getElementById('nextContentPreview').innerHTML = `‚Üí ${getNextContentName()}`;
                document.getElementById('prestigeButton').disabled = subscribers < prestigeCost || prestigeLevel >= contentUnlocks.length - 1;
                
                let html = '';
                contentItems.forEach(content => {
                    const unlock = contentUnlocks.find(u => u.id === content.id);
                    if (!unlock || !unlock.unlocked) return;
                    
                    const price = getContentPrice(content);
                    const canAfford = subscribers >= price.subs && cash >= price.cash;
                    
                    let effects = [];
                    if (content.cashPerSec > 0) effects.push(`+${content.cashPerSec * globalBonus} $/—Å–µ–∫`);
                    if (content.subsPerSec > 0) effects.push(`+${content.subsPerSec * globalBonus} üë•/—Å–µ–∫`);
                    if (content.clickBonus > 0) effects.push(`+${content.clickBonus} üë• –∫–ª–∏–∫`);
                    if (content.multiplierTarget) {
                        const target = contentItems.find(c => c.id === content.multiplierTarget);
                        effects.push(`x${1 + content.count * content.multiplierValue} ${target?.name || ''}`);
                    }
                    
                    html += `
                        <div class="content-item">
                            <div class="content-info">
                                <div class="content-name">
                                    ${content.name}
                                    ${content.count > 0 ? `<span class="level-badge">Lv.${content.count}</span>` : ''}
                                </div>
                                <div class="content-effects">
                                    ${effects.map(e => `<span class="effect-badge">${e}</span>`).join('')}
                                </div>
                            </div>
                            <button class="content-price" 
                                    data-content-id="${content.id}"
                                    ${!canAfford ? 'disabled' : ''}>
                                ${formatNum(price.subs)} üë•
                                ${price.cash > 0 ? `<span class="price-small">$${price.cash.toFixed(2)}</span>` : ''}
                            </button>
                        </div>
                    `;
                });
                
                document.getElementById('contentContainer').innerHTML = html;
                
                // Re-attach listeners
                contentItems.forEach(content => {
                    const button = document.querySelector(`button[data-content-id="${content.id}"]`);
                    if (button) {
                        button.onclick = (e) => {
                            e.preventDefault();
                            purchaseContent(content.id);
                        };
                    }
                });
            }

            // ============ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ============
            window.addEventListener('load', () => {
                if (window.Telegram?.WebApp) {
                    Telegram.WebApp.ready();
                    Telegram.WebApp.expand();
                }
                
                if (!loadGame()) {
                    contentUnlocks[0].unlocked = true;
                }
                
                recalcPassiveIncome();
                renderGame();
                renderModal();
                
                document.getElementById('clickButton').addEventListener('click', handleClick);
                document.getElementById('prestigeButton').addEventListener('click', performPrestige);
                
                document.getElementById('characterButton').addEventListener('click', () => {
                    renderModal();
                    document.getElementById('characterModal').classList.add('active');
                });
                
                document.getElementById('closeModalBtn').addEventListener('click', () => {
                    document.getElementById('characterModal').classList.remove('active');
                });
                
                document.getElementById('resetGameBtn').addEventListener('click', resetGame);
                
                window.selectSkinHandler = selectSkin;
                window.purchaseSkinHandler = (skinId) => {
                    purchaseSkin(skinId);
                    renderModal();
                };
                
                setInterval(idleTick, 1000);
                setInterval(saveGame, 30000);
            });

        })();
    </script>
</body>
</html>
